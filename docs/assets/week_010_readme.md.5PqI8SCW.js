import{_ as r,E as p,c as s,b as _,w as e,a3 as l,a2 as t,o as a,J as c,a as d}from"./chunks/framework.aTtkxbT6.js";const n="/assets/network.DLXq7TO_.png",C=JSON.parse('{"title":"智者不立危墙之下","description":"","frontmatter":{},"headers":[],"relativePath":"week/010/readme.md","filePath":"week/010/readme.md"}'),i={name:"week/010/readme.md"},m=t('<h1 id="智者不立危墙之下" tabindex="-1">智者不立危墙之下 <a class="header-anchor" href="#智者不立危墙之下" aria-label="Permalink to &quot;智者不立危墙之下&quot;">​</a></h1><p>昨儿下午五点钟左右，我的工位被围了～～</p><p>一位技术高经、一位大数据架构师、一位前端架构师、一位运维工程师，四个人突然出现在我的工位，围住了正在开心撸代码的我。</p><p>啥子事情嘛，这么大阵仗！！</p><p>起因是这样的。五点钟左右线上发生故障，所有用户无法登陆，故障持续了十几分钟。运维排查时，突然发现有个脚本文件加载失败，立马截图、留言发到故障处理群，“大概率是这个文件导致的故障”。</p><p><img src="'+n+'" alt="network"></p><p>瞅瞅是个啥，<code>heatmap.min.js</code>，呦西，是最近做的，可视化展示用户点击行为的工具库，公司内部收到一片好评！！</p><p>所以，线上故障，跟我这个库有锤子关系哦。这个脚本完全是独立的，不跟业务有任何的耦合关系，永远不会导致用户无法登陆。线上故障的事情，热力图库表示一点都不想背这个锅。</p><p>既然是资源未加载，那肯定是个网络问题啊！！！追查 COS 存储桶啊！！</p><p>打开网络面板，查看请求的域名。等等，眼尖的技术高经发现了一个问题，这个域名为何不是生产的域名！！</p><p>那啥，你听我狡辩～～</p><p>静态资源的发版流程为：</p>',12),h=t('<p>生产环境的发版，一般是要走正常 OA 审批流程，较为严谨、安全。</p><p>热力图是属于孵化型的项目，为了方便发版，在 uat 阶段就发版了，所以线上项目在引入热力图时，使用的域名是 <code>uat.xxx.com</code>。</p><p>发展到这一步，技术高经炸了，抛开技术不谈，为啥要<code>流程违规！！</code>、生产环境为啥要用验证环境的域名！！</p><p>这个故障在公司内部的故障群中，被众多领导层关注了。若是向领导层讲解技术正确性，领导就会关注到域名问题，进而暴露出违规发版的事情。</p><p>所以，二选一。一、承认技术错误；二、暴露违规发版的事情。果断选择一～～</p><p>反思：</p><ul><li>智者不立危墙之下，不要做明知道是错的事情</li><li>按流程做事，不要犯技术外的错误</li></ul><h1 id="_010" tabindex="-1">010 <a class="header-anchor" href="#_010" aria-label="Permalink to &quot;010&quot;">​</a></h1><h2 id="tool" tabindex="-1">Tool <a class="header-anchor" href="#tool" aria-label="Permalink to &quot;Tool&quot;">​</a></h2><ul><li><a href="https://jsoncrack.com/editor" target="_blank" rel="noreferrer">JSON 可视化</a></li></ul>',10);function u(T,f,A,k,E,x){const o=p("Mermaid");return a(),s("div",null,[m,(a(),_(l,null,{default:e(()=>[c(o,{id:"mermaid-36",class:"mermaid my-class",graph:"graph%20LR%0A%20%20A%5B%E5%BC%80%E5%8F%91%20dev%5D%20--%3E%20B%5B%E9%AA%8C%E8%AF%81%20uat%5D%20--%3E%20C%5B%E7%94%9F%E4%BA%A7%20prod%5D%0A"})]),fallback:e(()=>[d(" Loading... ")]),_:1})),h])}const b=r(i,[["render",u]]);export{C as __pageData,b as default};
