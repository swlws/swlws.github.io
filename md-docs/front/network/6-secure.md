# 网络安全

## 网络安全问题

计算机网络通信面临的两大类威胁，即`被动攻击`和`主动攻击`。

`被动攻击`指攻击者从网络上窃听他人的通信内容，也被称为`截获`。包含：

- `流量分析`。攻击者只是`观察`、`分析`协议数据单元而`不干扰`信息流，从而了解所交换数据的某种特征。

`主动攻击`的常见方式：

- `篡改`。攻击者故意篡改网络上传送的报文。
- `恶意程序`，主要种类：
  - `计算机病毒（computer virus）`。一种会“传染”其它程序的程序，传染是通过`修改其它程序`来把`自身或自己的变种`复制进去而完成的。
  - `计算机蠕虫（computer worm）`。通过`网络通信`功能，将自身从一个节点发送到另一个节点并`自动启动运行`的程序。
  - `特洛伊木马（Trojan horse）`。一种程序，它执行的功能并非它所`声称`的功能，而是某种`恶意功能`。
  - `逻辑炸弹（logic bomb）`。一种当运行环境满足某种特定条件时，执行其他`特殊功能`的程序。
  - `后门入侵（backdoor knocking）`。利用`系统`实现过程中的`漏洞`通过`网络`入侵系统。
  - `流氓软件`。一种`未经客户允许`就在用户计算机上`安装运行`并`损害用户利益`的软件。
- `拒绝服务Dos (Denial of Service)`。指攻击者向互联网上的某台服务器不停的发送大量分组，使该服务器无法提供正常服务，甚至完全瘫痪。
  - `分布式拒绝服务 DDoS（Distributed Denial of Service）`。从互联网上 `N 个网站`集中攻击`一个网站`。
  - `交换机中毒`。在使用以太网交换机的网络中，攻击者向某个交换机发送大量伪造的源 MAC 地址的帧，交换机的交换表因写入大量源 MAC 而存储不够用，导致交换机无法正常工作。

**计算机的安全目标如下：**

1. 防止析出报文内容和流量分析
2. 防止恶意程序
3. 检测更改报文流和拒绝服务

## 安全的计算机网络

一个安全的计算机网络应设法达到一下四个目标：

1. `保密性`。信息的内容，仅有信息的发送方和接收方懂。
2. `端点识别`。能够鉴别发送方、接收方的真实身份。
3. `信息的完整性`。信息的内容未被人篡改过。
4. `运行的安全性`。计算机网络能够正常、安全的运行。

## 两类密码体制

`对称密钥密码体制`和`公钥密码体制`

### 对称密钥密码体系

即加密密钥、解密密钥是使用相同的密码体制。

常用算法：

- `数据加密标准 DES（Data Encryption Standard）`
  - 保密性仅取决于对密钥的保密，算法公开。
- `三重 DES`，算法流程
  - 先用 KEY1 使用 DES 算法加密
  - 再用 KEY2 进行 DES 解密
  - 最后用 KEY1 进行 DES 加密，得到最终的秘文
- `高级加密标准 AES（Advanced Encryption Standard）`

### 公钥密码体制（public key crypto-system）

使用`一对`密钥，`加密密钥`向公众公开，`解密密钥`则是需要保密的。加密算法、解密算法也都是公开滴。

引入公钥密码体制的原因：

- `对称密码体制`的`密钥分配`问题，分配的方式有：
  - `事先约定`。这种方式，造成密钥的管理、更换极大的不便。
  - `信使传达`。在高度自动化的计算机网络中，使用信息传达密钥明显不合适。
  - `使用高度安全的密钥分配中心 KDC（Key Distributed Center）`。会使网络成本增加。
- 数字签名的需求

`算法实现：`

- RSA 算法

`公钥密码体制d的特点：`

- 密钥成对存在
- 公钥加密，私钥解密
- 私钥加密，公钥验签

## 数字签名

数字签名必须具备的能力：

1. `报文鉴别`。即接收者能够确信该报文的确是发送者发送的。
2. `报文的完整性`。接收者接收到的数据，与发送者发送的报文保持一致。
3. `不可否认`。发送着事后不能抵赖对报文的签名。

<img src="/net-secure/signature.png" />
<center><b>数据签名的流程</b></center>

> D 运算：解密算法；
> E 运算：加密算法

备注：RSA 的 E 运算、D 运算需要占用非常多的计算机的 CPU 时间。

## 鉴别

- 报文鉴别，对每一个收到的报文都要鉴别报文的发送者。包含：
  - 端点鉴别。
  - 文件完整性鉴别。
- 实体鉴别，在系统接入的全部时间内，对和自己通信的对方实体只需验证一次。
  - 实体可以是人、进程（客户或服务器），即端点鉴别

### 报文鉴别

#### 密码散列函数

`散列函数的特点：`

1. 输入可以很长，输出长度固定，并且较短。
2. 不同的输入可以对应同一个输出。

`密码学`中使用的`密码散列函数`，最重要的一个特点：`要找到不同的报文，具有同样的密码散列函数输出，在计算上是不可行的`。

实用的密码散列函数 MD5 和 SHA-1

- 报文摘要 MD5(Message Digest)
- 安全散列算法 SHA（Secure Hash Algorithm）

#### 报文鉴别码 MAC（Message Authentication Code）

使用散列函数构建报文鉴别码

<img src="/net-secure/MessageAuthenticationCode.png" />
<center><b>用报文鉴别码 MAC鉴别报文</b></center>

由于入侵者不掌握密钥 K，所以入侵者无法伪造 A 的报文鉴别码 MAC，因为无法伪造 A 发送的报文。这样就完成了对报文的鉴别。

> 注意：这里的密钥 K，可以是对称密钥体系，也可以公钥体系。所以在正式通信前，会有一次密钥交换过程。

#### 实体鉴别

实体鉴别所面临的问题：

**1. 重放攻击**

- 原理：
  - C 拦截到 A 向 B 发送报文
  - C 不破译秘文，直接将秘文发送给 B，
  - 使 B 误认为 C 就是 A，然后，B 将报文发回给伪装 A 的 B
- 解决方案：
  - 使用不重数解决
  - 重要的理论依据是：A 和 B 对不同的会话使用不同的不重数集。
